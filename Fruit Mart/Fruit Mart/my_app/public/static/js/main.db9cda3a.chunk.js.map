{"version":3,"sources":["pages/ItemsContext.jsx","pages/Modal.jsx","pages/Cart.jsx","pages/WishList.jsx","pages/Layout.jsx","pages/Login.jsx","pages/PrivateRoute.jsx","pages/Items.jsx","pages/Buy.jsx","pages/Like.jsx","pages/Profile.jsx","App.js","reportWebVitals.js","index.js"],"names":["ItemsContext","createContext","ItemsProvider","_ref","children","items","setItems","useState","wishlist","setWishlist","cart","setCart","React","createElement","Provider","value","Modal","isOpen","onClose","item","className","onClick","e","stopPropagation","src","image","alt","name","description","Cart","useContext","totalPrice","setTotalPrice","isModalOpen","setModalOpen","selectedItem","setSelectedItem","useEffect","fetchCart","async","response","axios","get","data","calculateTotalPrice","error","console","cartItems","total","reduce","acc","productId","price","count","updateQuantity","delete","updatedCart","filter","_id","put","map","toFixed","key","style","width","height","objectFit","borderRadius","openModal","closeModal","Wishlist","fetchWishlist","removeFromWishlist","Layout","Link","to","FontAwesomeIcon","icon","faAppleAlt","faShoppingCart","faHeart","faUser","Outlet","Login","oldUser","setOldUser","username","setUsername","email","setEmail","password","setPassword","message","setMessage","loading","setLoading","navigate","useNavigate","usageChanged","color","onSubmit","preventDefault","formData","loginData","fetch","method","headers","Content-Type","body","JSON","stringify","status","token","text","localStorage","setItem","errorMessage","includes","type","placeholder","onChange","target","required","FaRegUser","IoMdMail","FaLock","disabled","href","PrivateRoute","isTokenRefreshing","setIsTokenRefreshing","getItem","Navigate","_token$split$","base64","split","replace","jsonPayload","parse","atob","currentTime","Date","now","refreshThreshold","exp","removeItem","Authorization","then","ok","Error","json","window","location","reload","catch","Items","cartData","itemData","fetchItems","itemsWithQuantities","cartItem","find","quantity","inCart","loadData","storedToken","parsedToken","productIds","inWishlist","toString","itemId","prevWishlist","id","handleUnlike","post","handleLike","FaHeart","itemToDecrease","log","prevCart","prevItems","quantityChange","handleDecreaseQuantity","handleIncreaseQuantity","handleBuy","Buy","setCartItems","sum","prevCartItems","handleRemoveFromCart","Like","wishlistItems","setWishlistItems","handleRemoveFromWishlist","Profile","profile","setProfile","setFormData","isEditing","setIsEditing","fetchProfile","handleInputChange","[object Object]","user","faEdit","handleLogout","faSignOutAlt","App","Router","Routes","Route","path","element","index","reportWebVitals","onPerfEntry","Function","__webpack_require__","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.db9cda3a.chunk.js","sourcesContent":["import React, { createContext, useState } from 'react';\r\n\r\nexport const ItemsContext = createContext();\r\n\r\nexport const ItemsProvider = ({ children }) => {\r\n  const [items, setItems] = useState([]);\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [cart, setCart] = useState([]);\r\n\r\n  return (\r\n    <ItemsContext.Provider value={{ items, setItems, wishlist, setWishlist, cart, setCart }}>\r\n      {children}\r\n    </ItemsContext.Provider>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport './Modal.css';\r\n\r\nconst Modal = ({ isOpen, onClose, item }) => {\r\n  if (!isOpen || !item) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n        <img src={item.image} alt={item.name} className=\"modal-image\" />\r\n        <h2>{item.name}</h2>\r\n        <p>{item.description}</p>\r\n        <button onClick={onClose} className=\"close-btn\">Close</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","\r\n// components/Cart.jsx\r\nimport { ItemsContext } from './ItemsContext';\r\n\r\nimport React, { useEffect, useContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './Products.css';\r\nimport Modal from './Modal';\r\n\r\nexport default function Cart() {\r\n  const { cart, setCart } = useContext(ItemsContext);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n  const [isModalOpen, setModalOpen] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n  const openModal = (item) => {\r\n    setSelectedItem(item);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setSelectedItem(null);\r\n    setModalOpen(false);\r\n  };\r\n  // Fetch cart items and calculate total price on load\r\n  const fetchCart = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3000/api/cart');\r\n      setCart(response.data.items);\r\n      calculateTotalPrice(response.data.items);\r\n    } catch (error) {\r\n      console.error('Error fetching cart:', error);\r\n    }\r\n  };\r\n\r\n  // Calculate total price\r\n  const calculateTotalPrice = (cartItems) => {\r\n    const total = cartItems.reduce((acc, item) => {\r\n      return acc + item.productId.price * item.count;\r\n    }, 0);\r\n    setTotalPrice(total);\r\n  };\r\n\r\n  // Increase quantity\r\n  const increaseQuantity = async (productId, currentCount) => {\r\n    const newCount = currentCount + 1;\r\n    await updateQuantity(productId, newCount);\r\n  };\r\n\r\n  // Decrease quantity\r\n  const decreaseQuantity = async (productId, currentCount) => {\r\n    const newCount = currentCount > 1 ? currentCount - 1 : 1;\r\n    await updateQuantity(productId, newCount);\r\n  };\r\n\r\n  // Update item quantity\r\n  const updateQuantity = async (productId, count) => {\r\n    try {\r\n      if (count <= 0) {\r\n        // Remove item from the cart if count is zero\r\n        await axios.delete(`http://localhost:3000/api/cart/${productId}`);\r\n        const updatedCart = cart.filter(item => item.productId._id !== productId);\r\n        setCart(updatedCart);\r\n        calculateTotalPrice(updatedCart); // Recalculate total price if needed\r\n      } else {\r\n        // Update the quantity if count is greater than zero\r\n        await axios.put('http://localhost:3000/api/cart', { productId, count });\r\n        const updatedCart = cart.map(item =>\r\n          item.productId._id === productId ? { ...item, count } : item\r\n        );\r\n        setCart(updatedCart);\r\n        calculateTotalPrice(updatedCart); // Recalculate total price if needed\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating quantity:', error);\r\n    }\r\n  };\r\n  \r\n\r\n  // Remove from cart\r\n  const removeFromCart = async (productId) => {\r\n    try {\r\n      await axios.delete(`http://localhost:3000/api/cart/${productId}`);\r\n      const updatedCart = cart.filter(item => item.productId._id !== productId);\r\n      setCart(updatedCart);\r\n      calculateTotalPrice(updatedCart);\r\n    } catch (error) {\r\n      console.error('Error removing from cart:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2 className=\"total-price\">Total Price: ${totalPrice.toFixed(2)}</h2>\r\n      <h1>Your Cart</h1>\r\n      {cart\r\n        .filter(item => item.count > 0) // Only display items with count greater than zero\r\n        .map(item => (\r\n          <div key={item.productId._id} className=\"cart-item\">\r\n            <img\r\n  src={item.productId.image}\r\n  alt={item.productId.name}\r\n  style={{\r\n    width: '150px',         // Set desired width\r\n    height: '150px',        // Set desired height\r\n    objectFit: 'cover',     // Ensures image fills the area without distortion\r\n    borderRadius: '8px'     // Optional: for rounded corners\r\n  }}\r\n/><h3 onClick={() => openModal(item.productId)} className=\"product-name link\">{item.productId.name}</h3>\r\n            <p>Price per unit: ${item.productId.price}</p>\r\n            <p>Total price for item: ${(item.productId.price * item.count).toFixed(2)}</p>\r\n            <div className=\"button-container\">\r\n              <button onClick={() => updateQuantity(item.productId._id, item.count - 1)}>-</button>\r\n              <span>{item.count}</span>\r\n              <button onClick={() => updateQuantity(item.productId._id, item.count + 1)}>+</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      <Modal isOpen={isModalOpen} onClose={closeModal} item={selectedItem} />\r\n    </div>\r\n  );\r\n  \r\n}\r\n\r\n","\r\nimport React, { useEffect, useContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { ItemsContext } from './ItemsContext';\r\nimport './Products.css';\r\nimport Modal from './Modal';\r\n\r\nexport default function Wishlist() {\r\n  const { wishlist, setWishlist } = useContext(ItemsContext);\r\n  const [isModalOpen, setModalOpen] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchWishlist();\r\n  }, []);\r\n\r\n  const openModal = (item) => {\r\n    setSelectedItem(item);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setSelectedItem(null);\r\n    setModalOpen(false);\r\n  };\r\n\r\n  const fetchWishlist = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3000/api/wishlist');\r\n      setWishlist(response.data.items);\r\n    } catch (error) {\r\n      console.error('Error fetching wishlist:', error);\r\n    }\r\n  };\r\n\r\n  const removeFromWishlist = async (productId) => {\r\n    try {\r\n      await axios.delete(`http://localhost:3000/api/wishlist/${productId}`);\r\n      setWishlist(wishlist.filter(item => item._id !== productId));\r\n    } catch (error) {\r\n      console.error('Error removing from wishlist:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>Your Wishlist</h1>\r\n      {wishlist.map(item => (\r\n        <div key={item._id} className=\"wishlist-item\">\r\n          <img src={item.image} alt={item.name} className=\"product-image\" />\r\n          <h3 onClick={() => openModal(item)} className=\"product-name link\">{item.name}</h3>\r\n          <p>Price: ${item.price}</p>\r\n          <button\r\n            onClick={() => removeFromWishlist(item._id)}\r\n            className=\"remove-button\"\r\n          >\r\n            Remove\r\n          </button>\r\n        </div>\r\n      ))}\r\n      <Modal isOpen={isModalOpen} onClose={closeModal} item={selectedItem} />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { Link, Outlet } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faAppleAlt, faShoppingCart, faHeart, faUser } from '@fortawesome/free-solid-svg-icons';\r\nimport './Layout.css';\r\n\r\nexport default function Layout() {\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar\">\r\n        <div className=\"navbar-logo\">\r\n          \r\n          <h2><Link to=\"/\" className=\"nav-link\">\r\n            <FontAwesomeIcon icon={faAppleAlt} className=\"nav-icon\" />\r\n            Fruit Mart\r\n          </Link></h2>\r\n        </div>\r\n        <div className=\"navbar-links\">\r\n          <Link to=\"/\" className=\"nav-link\">\r\n            <FontAwesomeIcon icon={faAppleAlt} className=\"nav-icon\" />\r\n            Products\r\n          </Link>\r\n          <Link to=\"/buyed\" className=\"nav-link\">\r\n            <FontAwesomeIcon icon={faShoppingCart} className=\"nav-icon\" />\r\n            Cart\r\n          </Link>\r\n          <Link to=\"/liked\" className=\"nav-link\">\r\n            <FontAwesomeIcon icon={faHeart} className=\"nav-icon\" />\r\n            Wishlist\r\n          </Link>\r\n          <Link to=\"/profile\" className=\"nav-link\">\r\n            <FontAwesomeIcon icon={faUser} className=\"nav-icon\" />\r\n            Profile\r\n          </Link>\r\n        </div>\r\n      </nav>\r\n      <main className=\"content\">\r\n        <Outlet />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport React, { useState } from 'react';\r\nimport './Login.css';\r\nimport { FaRegUser, FaLock } from \"react-icons/fa\";\r\nimport { IoMdMail } from \"react-icons/io\";\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Login = () => {\r\n  const [oldUser, setOldUser] = useState(true);\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const formData = { username, email, password };\r\n    const loginData = { email, password };\r\n\r\n    if (oldUser) {\r\n      try {\r\n        const response = await fetch(\"http://localhost:3000/api/login\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(loginData),\r\n        });\r\n\r\n        if (response.status === 200) {\r\n          const token = await response.text();\r\n          setMessage(\"Login successful!\");\r\n          localStorage.setItem('authToken', token);\r\n          navigate('/');\r\n        } else if (response.status === 401) {\r\n          setMessage(\"Login failed: Invalid credentials. Please try again.\");\r\n        } else if (response.status === 403) {\r\n          setMessage(\"Login failed: Email not verified. Please check your email to verify your account.\");\r\n        } else {\r\n          setMessage(\"Login failed: Unexpected error. Please try again later.\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error during login:\", error);\r\n        setMessage(\"An error occurred during login. Please try again.\");\r\n      }\r\n    } else {\r\n      try {\r\n        const response = await fetch(\"http://localhost:3000/api/register\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(formData),\r\n        });\r\n\r\n        if (response.status === 200) {\r\n          const token = await response.text();\r\n          setMessage(\"Registration successful! Please check your email to verify your account.\");\r\n          localStorage.setItem('authToken', token);\r\n          navigate('/login');\r\n        } else if (response.status === 409) {\r\n          const errorMessage = await response.text();\r\n          setMessage(`Registration failed: ${errorMessage}`);\r\n        } else {\r\n          setMessage(\"Registration failed: Unexpected error. Please try again later.\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error during registration:\", error);\r\n        setMessage(\"An error occurred during registration. Please try again.\");\r\n      }\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const usageChanged = () => {\r\n    setOldUser(!oldUser);\r\n    setMessage('');\r\n    setUsername('');\r\n    setEmail('');\r\n    setPassword('');\r\n  };\r\n\r\n  return (\r\n    <div className='wrapper' style={{color:'black'}}>\r\n      <form onSubmit={handleSubmit} style={{color: 'black'}}>\r\n        <h1 style={{color:'black'}}>{oldUser ? \"Login\" : \"Register\"}</h1>\r\n        {message && (\r\n          <p style={{ color: message.includes('failed') ? 'red' : 'green' }}>\r\n            {message}\r\n          </p>\r\n        )}\r\n        \r\n        {!oldUser && (\r\n          <div className='input-box'>\r\n            <input\r\n              type='text'\r\n              placeholder='Username'\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              required\r\n            />\r\n            <FaRegUser className='icon' />\r\n          </div>\r\n        )}\r\n\r\n        <div className='input-box'>\r\n          <input\r\n            type='email'\r\n            placeholder='Email'\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n          />\r\n          <IoMdMail className='icon' />\r\n        </div>\r\n        \r\n        <div className='input-box'>\r\n          <input\r\n            type='password'\r\n            placeholder='Password'\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n          />\r\n          <FaLock className='icon' />\r\n        </div>\r\n        \r\n        <button type='submit' disabled={loading}>\r\n          {loading ? \"Loading...\" : (oldUser ? \"Login\" : \"Register\")}\r\n        </button>\r\n        \r\n        {oldUser ? (\r\n          <div className='register-link'>\r\n            <p>Don't have an account? <a href='#' onClick={usageChanged}> Register</a></p>\r\n          </div>\r\n        ) : (\r\n          <div className='register-link'>\r\n            <p>Already have an account? <a href='#' onClick={usageChanged}> Login</a></p>\r\n          </div>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n\r\n","\r\nimport React, { useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nconst PrivateRoute = ({ children }) => {\r\n  const [isTokenRefreshing, setIsTokenRefreshing] = useState(false);\r\n  const token = localStorage.getItem('authToken');\r\n\r\n  if (!token) {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n\r\n  try {\r\n    // Decode JWT payload\r\n    const base64Url = token.split(' ')[1]?.split('.')[1] || token.split('.')[1];\r\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n    const jsonPayload = JSON.parse(atob(base64));\r\n\r\n    // Current time in seconds\r\n    const currentTime = Date.now() / 1000;\r\n    const refreshThreshold = 5 * 60; // 5 minutes in seconds\r\n\r\n    if (jsonPayload.exp < currentTime) {\r\n      // Token is expired, remove it from localStorage and redirect\r\n      localStorage.removeItem('authToken');\r\n      return <Navigate to=\"/login\" />;\r\n    }\r\n\r\n    // Refresh the token if it's close to expiry and not already refreshing\r\n    if (jsonPayload.exp - currentTime < refreshThreshold && !isTokenRefreshing) {\r\n      setIsTokenRefreshing(true);\r\n      fetch('http://localhost:3000/api/refresh-token', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error('Failed to refresh token');\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.token) {\r\n            localStorage.setItem('authToken', `Bearer ${data.token}`);\r\n            setIsTokenRefreshing(false); // Reset the flag after success\r\n            window.location.reload(); // Reload to ensure the new token is used\r\n          } else {\r\n            throw new Error('No token received');\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error refreshing token:', error);\r\n          localStorage.removeItem('authToken');\r\n          window.location.href = '/login';\r\n        });\r\n    }\r\n\r\n    // Token is valid, render the children components\r\n    return children;\r\n  } catch (error) {\r\n    console.error('Error decoding token:', error);\r\n    localStorage.removeItem('authToken');\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n};\r\n\r\nexport default PrivateRoute;\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './Items.css';\r\nimport { FaHeart } from 'react-icons/fa'; // Import the heart icon\r\n\r\nexport default function Items() {\r\n  const [items, setItems] = useState([]);\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [cart, setCart] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        const cartData = await fetchCart();\r\n        const itemData = await fetchItems();\r\n        await fetchWishlist();\r\n\r\n        // Merge cart data into items for initial display\r\n        const itemsWithQuantities = itemData.map(item => {\r\n          const cartItem = cartData.find(cartItem => cartItem.productId._id === item._id);\r\n          return {\r\n            ...item,\r\n            quantity: cartItem ? cartItem.quantity : 0,\r\n            inCart: !!cartItem // Set to true if item is in cart, false otherwise\r\n          };\r\n        });\r\n\r\n        setItems(itemsWithQuantities);\r\n      } catch (error) {\r\n        console.error('Error loading data:', error);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n  }, []);\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3000/api/items');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching items:', error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const fetchWishlist = async () => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n      if (!parsedToken) {\r\n        console.error('Token not found');\r\n        return [];\r\n      }\r\n\r\n      const response = await axios.get('http://localhost:3000/api/userdata/liked', {\r\n        headers: {\r\n          Authorization: `Bearer ${parsedToken}`,\r\n        },\r\n      });\r\n\r\n      const productIds = response.data.map(item => item.productId._id);\r\n      setWishlist(productIds);\r\n      return productIds;\r\n    } catch (error) {\r\n      console.error('Error fetching wishlist:', error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const fetchCart = async () => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n      if (!parsedToken) {\r\n        console.error('Token not found');\r\n        return [];\r\n      }\r\n\r\n      const response = await axios.get('http://localhost:3000/api/userdata/buyed', {\r\n        headers: {\r\n          Authorization: `Bearer ${parsedToken}`,\r\n        },\r\n      });\r\n\r\n      const cartData = response.data.map(item => ({ productId: item.productId, quantity: item.quantity }));\r\n      setCart(cartData);\r\n      return cartData;\r\n    } catch (error) {\r\n      console.error('Error fetching cart:', error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const handleLike = async (itemId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n      if (!parsedToken) {\r\n        console.error('Token not found');\r\n        return;\r\n      }\r\n\r\n      await axios.post('http://localhost:3000/api/userdata/like',\r\n        { productId: itemId },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${parsedToken}`,\r\n          },\r\n        }\r\n      );\r\n      setWishlist(prevWishlist => [...prevWishlist, itemId.toString()]);\r\n    } catch (error) {\r\n      console.error('Error liking item:', error);\r\n    }\r\n  };\r\n\r\n  const handleUnlike = async (itemId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n      if (!parsedToken) {\r\n        console.error('Token not found');\r\n        return;\r\n      }\r\n\r\n      await axios.delete(`http://localhost:3000/api/userdata/wishlist/${itemId}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${parsedToken}`,\r\n        },\r\n      });\r\n      setWishlist(prevWishlist => prevWishlist.filter(id => id !== itemId.toString()));\r\n    } catch (error) {\r\n      console.error('Error unliking item:', error);\r\n    }\r\n  };\r\n\r\n  const handleBuy = async (itemId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n      await axios.post(\r\n        'http://localhost:3000/api/userdata/buy',\r\n        { productId: itemId },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${parsedToken}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      setCart(prevCart => [...prevCart, { productId: { _id: itemId }, quantity: 1 }]);\r\n      setItems(prevItems => prevItems.map(item =>\r\n        item._id === itemId ? { ...item, quantity: 1, inCart: true } : item\r\n      ));\r\n    } catch (error) {\r\n      console.error('Error buying item:', error);\r\n    }\r\n  };\r\n\r\n  const handleIncreaseQuantity = async (itemId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n      await axios.put(\r\n        'http://localhost:3000/api/userdata/updatecart',\r\n        { productId: itemId, quantityChange: 1 },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${parsedToken}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      setCart(prevCart => prevCart.map(item =>\r\n        item.productId._id === itemId ? { ...item, quantity: item.quantity + 1 } : item\r\n      ));\r\n      setItems(prevItems => prevItems.map(item =>\r\n        item._id === itemId ? { ...item, quantity: item.quantity + 1 } : item\r\n      ));\r\n    } catch (error) {\r\n      console.error('Error increasing quantity:', error);\r\n    }\r\n  };\r\n\r\n  const handleDecreaseQuantity = async (itemId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n      const itemToDecrease = cart.find(item => item.productId._id === itemId);\r\nconsole.log(itemToDecrease.quantity)\r\n      if (itemToDecrease.quantity === 1) {\r\n        console.log(\"yoo it's here\")\r\n        // Remove item from cart if quantity is 1\r\n        await axios.delete(`http://localhost:3000/api/userdata/cart/${itemId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${parsedToken}`,\r\n          },\r\n        });\r\n        setCart(prevCart => prevCart.filter(item => item.productId._id !== itemId));\r\n        setItems(prevItems => prevItems.map(item =>\r\n          item._id === itemId ? { ...item, quantity: 0, inCart: false } : item\r\n        ));\r\n      } else if (itemToDecrease) {\r\n        console.log(\"yoo it's here\")\r\n        // Decrease quantity by 1\r\n        await axios.put(\r\n          'http://localhost:3000/api/userdata/updatecart',\r\n          { productId: itemId, quantityChange: -1 },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${parsedToken}`,\r\n              'Content-Type': 'application/json',\r\n            },\r\n          }\r\n        );\r\n\r\n        setCart(prevCart => prevCart.map(item =>\r\n          item.productId._id === itemId ? { ...item, quantity: item.quantity - 1 } : item\r\n        ));\r\n        setItems(prevItems => prevItems.map(item =>\r\n          item._id === itemId ? { ...item, quantity: item.quantity - 1 } : item\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error decreasing quantity:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"items-container\">\r\n      <h1>Items</h1>\r\n\r\n      <div className=\"items-list\">\r\n        {items.map((item) => {\r\n          const inWishlist = wishlist.includes(item._id.toString());\r\n          const inCart = cart.find(cartItem => cartItem.productId._id === item._id);\r\n          return (\r\n            <div key={item._id} className=\"item-card\">\r\n              <img src={item.image} alt={item.name} className=\"item-image\" />\r\n              <h3>{item.name}</h3>\r\n              <p>{item.description}</p>\r\n              <p>Price: ${item.price}</p>\r\n              <button\r\n                onClick={() => (inWishlist ? handleUnlike(item._id) : handleLike(item._id))}\r\n                className={`like-icon ${inWishlist ? 'active' : ''}`}\r\n              >\r\n                <FaHeart />\r\n              </button>\r\n              {inCart ? (\r\n                <div className=\"quantity-controls\">\r\n                  <button onClick={() => handleDecreaseQuantity(item._id)} disabled={inCart.quantity < 1}>-</button>\r\n                  <span>{inCart.quantity}</span>\r\n                  <button onClick={() => handleIncreaseQuantity(item._id)}>+</button>\r\n                </div>\r\n              ) : (\r\n                <button onClick={() => handleBuy(item._id)} className=\"buy-button\">\r\n                  Buy It\r\n                </button>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './Items.css';\r\n\r\nexport default function Buy() {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const fetchCart = async () => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n\r\n      const response = await axios.get('http://localhost:3000/api/userdata/buyed', {\r\n        headers: {\r\n          Authorization: `Bearer ${parsedToken}`,\r\n        },\r\n      });\r\n\r\n      setCartItems(response.data);\r\n      calculateTotalPrice(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching cart:', error);\r\n    }\r\n  };\r\n\r\n  const calculateTotalPrice = (items) => {\r\n    const total = items.reduce((sum, item) => sum + item.productId.price * item.quantity, 0);\r\n    setTotalPrice(total);\r\n  };\r\n\r\n  const handleIncreaseQuantity = async (productId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n\r\n      await axios.put(\r\n        'http://localhost:3000/api/userdata/updatecart',\r\n        { productId, quantityChange: 1 },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${parsedToken}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      setCartItems(prevCartItems =>\r\n        prevCartItems.map(item =>\r\n          item.productId._id === productId ? { ...item, quantity: item.quantity + 1 } : item\r\n        )\r\n      );\r\n      calculateTotalPrice(\r\n        cartItems.map(item =>\r\n          item.productId._id === productId ? { ...item, quantity: item.quantity + 1 } : item\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error('Error increasing quantity:', error);\r\n    }\r\n  };\r\n\r\n  const handleDecreaseQuantity = async (productId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n      const itemToDecrease = cartItems.find(item => item.productId._id === productId);\r\n\r\n      if (itemToDecrease && itemToDecrease.quantity === 1) {\r\n        // Remove item from cart if quantity is 1\r\n        await axios.delete(`http://localhost:3000/api/userdata/cart/${productId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${parsedToken}`,\r\n          },\r\n        });\r\n        const updatedCart = cartItems.filter(item => item.productId._id !== productId);\r\n        setCartItems(updatedCart);\r\n        calculateTotalPrice(updatedCart);\r\n      } else if (itemToDecrease) {\r\n        // Decrease quantity by 1\r\n        await axios.put(\r\n          'http://localhost:3000/api/userdata/updatecart',\r\n          { productId, quantityChange: -1 },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${parsedToken}`,\r\n              'Content-Type': 'application/json',\r\n            },\r\n          }\r\n        );\r\n\r\n        const updatedCart = cartItems.map(item =>\r\n          item.productId._id === productId ? { ...item, quantity: item.quantity - 1 } : item\r\n        );\r\n        setCartItems(updatedCart);\r\n        calculateTotalPrice(updatedCart);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error decreasing quantity:', error);\r\n    }\r\n  };\r\n\r\n  const handleRemoveFromCart = async (productId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n\r\n      await axios.delete(`http://localhost:3000/api/userdata/cart/${productId}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${parsedToken}`,\r\n        },\r\n      });\r\n\r\n      const updatedCart = cartItems.filter(item => item.productId._id !== productId);\r\n      setCartItems(updatedCart);\r\n      calculateTotalPrice(updatedCart);\r\n      console.log('Item removed from cart');\r\n    } catch (error) {\r\n      console.error('Error removing item from cart:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"items-container\">\r\n      <h1>Cart</h1>\r\n      <div className=\"items-list\">\r\n        {cartItems.map((item) => (\r\n          <div key={item.productId._id} className=\"item-card\">\r\n            <img src={item.productId.image} alt={item.productId.name} className=\"item-image\" />\r\n            <h3>{item.productId.name}</h3>\r\n            <p>{item.productId.description}</p>\r\n            <p>Price: ${item.productId.price}</p>\r\n            <div className=\"quantity-controls\">\r\n              <button onClick={() => handleDecreaseQuantity(item.productId._id)} disabled={item.quantity < 1}>-</button>\r\n              <span>{item.quantity}</span>\r\n              <button onClick={() => handleIncreaseQuantity(item.productId._id)}>+</button>\r\n            </div>\r\n            <button onClick={() => handleRemoveFromCart(item.productId._id)} className=\"remove-button\">\r\n              Remove\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"total-price\">\r\n        <h2>Total Price: ${totalPrice.toFixed(2)}</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './Items.css';\r\n\r\nexport default function Like() {\r\n  const [wishlistItems, setWishlistItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchWishlist();\r\n  }, []);\r\n\r\n  const fetchWishlist = async () => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n\r\n      const response = await axios.get('http://localhost:3000/api/userdata/liked', {\r\n        headers: {\r\n          Authorization: `Bearer ${parsedToken}`,\r\n        },\r\n      });\r\n\r\n      setWishlistItems(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching wishlist:', error);\r\n    }\r\n  };\r\n\r\n  const handleRemoveFromWishlist = async (productId) => {\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n\r\n      await axios.delete(`http://localhost:3000/api/userdata/wishlist/${productId}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${parsedToken}`,\r\n        },\r\n      });\r\n\r\n      setWishlistItems(wishlistItems.filter(item => item.productId._id !== productId));\r\n      console.log('Item removed from wishlist');\r\n    } catch (error) {\r\n      console.error('Error removing item from wishlist:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"items-container\">\r\n      <h1>Wishlist</h1>\r\n      <div className=\"items-list\">\r\n        {wishlistItems.map((item) => (\r\n          <div key={item.productId._id} className=\"item-card\">\r\n            <img src={item.productId.image} alt={item.productId.name} className=\"item-image\" />\r\n            <h3>{item.productId.name}</h3>\r\n            <p>{item.productId.description}</p>\r\n            <p>Price: ${item.productId.price}</p>\r\n            <button onClick={() => handleRemoveFromWishlist(item.productId._id)} className=\"remove-button\">\r\n              Remove\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSignOutAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\r\nimport './Profile.css';\r\n\r\nexport default function Profile() {\r\n  const [profile, setProfile] = useState({});\r\n  const [formData, setFormData] = useState({ username: '', email: '' });\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const storedToken = localStorage.getItem('authToken');\r\n        const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n        if (!parsedToken) {\r\n          console.error('Token not found');\r\n          navigate('/login'); // Redirect if no token is found\r\n          return;\r\n        }\r\n\r\n        const response = await axios.get('http://localhost:3000/api/profile', {\r\n          headers: {\r\n            Authorization: `Bearer ${parsedToken}`,\r\n          },\r\n        });\r\n\r\n        setProfile(response.data);\r\n        setFormData({ username: response.data.username, email: response.data.email });\r\n      } catch (error) {\r\n        console.error('Error fetching profile:', error);\r\n        navigate('/login'); // Redirect on error\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, [navigate]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('authToken');\r\n    navigate('/login');\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleUpdateProfile = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const storedToken = localStorage.getItem('authToken');\r\n      const parsedToken = storedToken && JSON.parse(storedToken).token;\r\n\r\n      const response = await axios.put(\r\n        'http://localhost:3000/api/profile',\r\n        { ...formData },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${parsedToken}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      setProfile(response.data.user);\r\n      setIsEditing(false);\r\n      console.log('Profile updated successfully');\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <h1>Profile</h1>\r\n      {isEditing ? (\r\n        <form onSubmit={handleUpdateProfile}>\r\n          <div className=\"form-group\">\r\n            <label>Username:</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              value={formData.username}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Email:</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={formData.email}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"update-button\">Update Profile</button>\r\n          <button type=\"button\" onClick={() => setIsEditing(false)} className=\"cancel-button\">\r\n            Cancel\r\n          </button>\r\n        </form>\r\n      ) : (\r\n        <div>\r\n          <p><strong>Username:</strong> {profile.username}</p>\r\n          <p><strong>Email:</strong> {profile.email}</p>\r\n          <button onClick={() => setIsEditing(true)} className=\"edit-button\">\r\n            <FontAwesomeIcon icon={faEdit} /> Edit Profile\r\n          </button>\r\n          <button onClick={handleLogout} className=\"logout-button\">\r\n            <FontAwesomeIcon icon={faSignOutAlt} /> Logout\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","\n\nimport React from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport { ItemsProvider } from './pages/ItemsContext';\nimport Products from './pages/Products';\nimport Cart from './pages/Cart';\nimport Wishlist from './pages/WishList';\nimport Layout from './pages/Layout';\nimport Login from './pages/Login';\nimport PrivateRoute from './pages/PrivateRoute';\nimport Items from './pages/Items';\nimport Buy from './pages/Buy';\nimport Like from './pages/Like';\nimport Profile from './pages/Profile';\n\nfunction App() {\n  return (\n    <ItemsProvider>\n      <Router>\n        <Routes>\n          <Route path=\"/\" element={<Layout />}>\n            {/* Protect the Products page with PrivateRoute */}\n            <Route index element={\n              <PrivateRoute>\n                <Items />\n              </PrivateRoute>\n            } />\n            <Route path=\"login\" element={<Login />} />\n            <Route path=\"cart\" element={\n              <PrivateRoute>\n                <Cart />\n              </PrivateRoute>\n            } />\n            <Route path=\"items\" element={\n              <PrivateRoute>\n                <Items />\n              </PrivateRoute>\n            } />\n            <Route path=\"buyed\" element={\n              <PrivateRoute>\n                <Buy />\n              </PrivateRoute>\n            } />\n            <Route path=\"liked\" element={\n              <PrivateRoute>\n                <Like />\n              </PrivateRoute>\n            } />\n            <Route path=\"wishlist\" element={\n              <PrivateRoute>\n                <Wishlist />\n              </PrivateRoute>\n            } />\n             <Route path=\"profile\" element={\n              <PrivateRoute>\n                <Profile />\n              </PrivateRoute>\n            } />\n          </Route>\n        </Routes>\n      </Router>\n    </ItemsProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}